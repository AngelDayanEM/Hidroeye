<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HidroEye - Sistema de Monitoreo de Calidad de Agua para Invernaderos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- Leaflet y Routing Machine (gratis, sin API key) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
<!-- EmailJS SDK -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<!-- Tu script personalizado -->
<script src="js/maps.js"></script>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<!-- SDK de PayPal (usa tu propio client-id aquí) -->
<script src="https://www.paypal.com/sdk/js?client-id=AYNnPaks3a56FipdJmfgbT6kSDZaw-KgJtsMmI6vfRRw0uxW8Bf7RXeJSHEZlxg6-1JV63jh33BN7Tjz&currency=MXN"></script>

</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
    <div class="container">
        <a class="navbar-brand fw-bold" href="index.html">
            <i class="bi bi-droplet-fill"></i> HidroEye
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="index.html">Inicio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#producto">Producto</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#ubicacion">Ubicación</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contacto">Contacto</a>
                </li>
           
                <!-- User Menu (oculto inicialmente) -->
                <li id="userMenu" class="nav-item dropdown" style="display: none;">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="bi bi-person-circle me-1"></i>
                        <span class="user-name">Usuario</span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>Mi Perfil</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-heart me-2"></i>Mis Favoritos</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item" href="#" id="logoutButton">
                                <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión
                            </a>
                        </li>
                    </ul>
                </li>
                <!-- dashboards (solo para usuarios logueados) -->
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html" id="dashboard-menu-item" style="display: none;">
                            <i class="fas fa-chart-line"></i> Dashboard
                        </a>
                    </li>
                <!-- Carrito (solo para usuarios logueados) -->
                <li id="cartLink" class="nav-item" style="display: none;">
                    <a href="carrito.html" class="btn btn-outline-light position-relative">
                        <i class="bi bi-cart"></i> Carrito
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-counter" style="display: none;">
                            0
                        </span>
                    </a>
                </li>

                <!-- Botones de Login/Register (visibles inicialmente) -->
                <li class="nav-item" id="loginButtonItem">
                    <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">
                        <i class="bi bi-person-circle"></i> Iniciar Sesión
                    </a>
                </li>
                <li class="nav-item" id="registerButtonItem">
                    <a class="nav-link btn btn-light text-primary ms-2 px-3" href="#" data-bs-toggle="modal" data-bs-target="#registerModal">
                        Registrarse
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
    <!-- Hero Section -->
  <section class="hero-section">
  <div class="container">
    <div class="row align-items-center min-vh-75">
      <div class="col-lg-6">
        <h1 class="display-3 fw-bold text-white mb-4">
          Monitoreo Inteligente de Agua para tus Invernaderos
        </h1>
        <p class="lead text-white mb-4">
          Optimiza la calidad del agua en el Valle de Mezquital con tecnología de punta.
          Control en tiempo real, alertas automáticas y análisis detallados.
        </p>
        <div class="d-flex gap-3">
          <a href="#producto" class="btn btn-light btn-lg px-4">
            Ver Producto
          </a>
          <a href="#contacto" class="btn btn-outline-light btn-lg px-4">
            Contactar
          </a>
        </div>
      </div>

      <!-- Carrusel de imágenes -->
      <div class="col-lg-6">
        <div id="carouselHero" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
          <div class="carousel-inner rounded shadow-lg">
            <div class="carousel-item active">
              <img src="/imagenes/invernadero.jpg" class="d-block w-100 img-fluid" alt="Imagen 1">
            </div>
            <div class="carousel-item">
              <img src="/imagenes/prototipo medidor.png" class="d-block w-100 img-fluid" alt="Imagen 2">
            </div>
           
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


    <!-- Features Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row text-center mb-5">
                <div class="col">
                    <h2 class="display-5 fw-bold">¿Por qué HidorEye?</h2>
                    <p class="lead text-muted">La solución completa para el control de calidad de agua</p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="feature-icon bg-primary text-white rounded-circle mx-auto mb-3">
                                <i class="bi bi-speedometer2"></i>
                            </div>
                            <h4 class="fw-bold">Monitoreo en Tiempo Real</h4>
                            <p class="text-muted">Visualiza los parámetros de calidad del agua instantáneamente desde cualquier dispositivo.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="feature-icon bg-success text-white rounded-circle mx-auto mb-3">
                                <i class="bi bi-bell-fill"></i>
                            </div>
                            <h4 class="fw-bold">Alertas Inteligentes</h4>
                            <p class="text-muted">Recibe notificaciones automáticas cuando los niveles excedan los parámetros establecidos.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="feature-icon bg-info text-white rounded-circle mx-auto mb-3">
                                <i class="bi bi-graph-up-arrow"></i>
                            </div>
                            <h4 class="fw-bold">Análisis Detallados</h4>
                            <p class="text-muted">Reportes completos y gráficas históricas para tomar mejores decisiones.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<!-- Memberships Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col">
                <h2 class="display-5 fw-bold">Membresías HidroEye</h2>
                <p class="lead text-muted">Piesa la membresía que mejor se adapte a tus necesidades</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <h4 class="fw-bold">Membresía Básica</h4>
                        <p class="text-muted">Costo: $1000</p>
                        <p class="text-muted">Acceso básico a las herramientas de monitoreo y análisis de agua.</p>
                        <ul class="list-unstyled">
                            <li>Acceso a Informes Mensuales</li>
                            <li>Soporte por Correo Electrónico</li>
                            <li>Acceso a la Aplicación Móvil</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <h4 class="fw-bold">Membresía Premium</h4>
                        <p class="text-muted">Costo: $2500</p>
                        <p class="text-muted">Incluye todas las características de la Membresía Básica, más alertas inteligentes.</p>
                        <ul class="list-unstyled">
                            <li>Análisis Avanzado</li>
                            <li>Alertas Personalizadas</li>
                            <li>Acceso a Webinars Exclusivos</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <h4 class="fw-bold">Garantía VIP</h4>
                        <p class="text-muted">Costo: $3000</p>
                        <p class="text-muted">Acceso total a todas las funciones y soporte prioritario.</p>
                        <ul class="list-unstyled">
                            <li>Consultoría Personalizada</li>
                            <li>Acceso Prioritario a Nuevas Funciones</li>
                            <li>Soporte 24/7</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
    <!-- Product Section -->
    <section id="producto" class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <!-- Product Gallery -->
                    <div class="product-gallery">
                        <div class="main-image mb-3">
                            <img id="mainProductImage" src="/imagenes/invernadero.jpg" alt="Producto Principal" class="img-fluid rounded shadow">
                        </div>
                        <div class="thumbnail-images d-flex gap-2">
                            <img src="/imagenes/BIEN EH .jpg" alt="Vista 1" class="img-thumbnail thumbnail-img active" onclick="changeMainImage(this.src)">
                            <img src="/imagenes/reseptora.jpg" alt="Vista 2" class="img-thumbnail thumbnail-img" onclick="changeMainImage(this.src)">
                            <img src="/imagenes/4g.png" alt="Vista 3" class="img-thumbnail thumbnail-img" onclick="changeMainImage(this.src)">
                            <video src="/imagenes/Marketing_video_Pippit_20251013165618.mp4" alt="Vista 4" class="img-thumbnail thumbnail-img" onclick="showVideo()"><!-- NO SE VE EL VIDEO -->
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="product-info">
                        <h2 class="display-5 fw-bold mb-3">Sistema HidroEye</h2>
                        <div class="mb-3">
                            <span class="badge bg-success">Disponible</span>
                            <span class="badge bg-info ms-2">Envío Gratis</span>
                        </div>
                        
                        <!-- Stock Counter -->
                        <div class="alert alert-warning d-flex align-items-center mb-3">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            <span>Solo quedan <strong id="stockCount">12 unidades</strong> disponibles</span>
                        </div>

                        <p class="lead text-muted mb-4">
                            Sistema completo de monitoreo de calidad de agua diseñado específicamente para invernaderos en el Valle de Mezquital. Incluye sensores de pH, temperatura y turbidez.
                        </p>
                        <!--     Price Calculator -->
<div class="card border-primary mb-4">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="bi bi-calculator"></i> Compra</h5>
    </div>
    <div class="card-body">
        <!-- Cantidad -->
        <div class="mb-3">
            <label class="form-label fw-bold">Cantidad:</label>
            <div class="input-group" style="max-width: 150px;">
                <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(-1)">-</button>
                <input type="number" class="form-control text-center" id="quantity" value="1" min="1" max="12" readonly>
                <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(1)">+</button>
            </div>
        </div>

        <!-- Extras -->
        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="maintenanceService" onchange="calculateTotal()">
            <label class="form-check-label" for="maintenanceService">
                Membresía Premium - $2,500 MXN/año
            </label>
        </div>
        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="mobileApp" onchange="calculateTotal()">
            <label class="form-check-label" for="mobileApp">
                Membresía Básica - $1,000 MXN/año
            </label>
        </div>
        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="extendedWarranty" onchange="calculateTotal()">
            <label class="form-check-label" for="extendedWarranty">
                Garantía Extendida (2 años) - $3,000 MXN
            </label>
        </div>

    
        <!-- Totales -->
        <div class="d-flex justify-content-between mb-2">
            <span>Subtotal:</span>
            <span class="fw-bold" id="subtotal">$4,299.00 MXN</span>
        </div>
        <div class="d-flex justify-content-between mb-2">
            <span>IVA (16%):</span>
            <span class="fw-bold" id="iva">$687.84 MXN</span>
        </div>
        <div class="d-flex justify-content-between mb-3 fs-4">
            <span class="fw-bold">Total:</span>
            <span class="fw-bold text-primary" id="total">$4,986.84 MXN</span>
        </div>

        <!-- Botones -->
   <div id="purchaseButtons" style="display: none;">
   <button class="btn btn-primary btn-lg w-100 mb-2 btn-comprar" onclick="addToCart()" style="display: none;">
    <i class="bi bi-cart-plus"></i> Agregar al Carrito
</button>

      <!-- Botones de compra -->
  <button class="btn btn-success btn-lg w-100 btn-comprar" data-bs-toggle="modal" data-bs-target="#paymentModal" onclick="syncModalTotals()" style="display: none;">
    <i class="bi bi-credit-card"></i> Comprar Ahora
</button>
</div>

<!-- Mensaje para no logueados -->
<div id="loginToPurchase" class="alert alert-info" style="display: none;">
    <i class="bi bi-info-circle"></i> Para comprar este producto, por favor <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">inicia sesión</a>.
</div>
    </div>
</div>

<!-- Modal de Pago -->
<div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="paymentModalLabel">Finalizar Compra</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Métodos de pago -->
                    <div class="col-md-8">
                        <h6>Métodos de Pago</h6>
                        <div class="payment-methods mb-4">
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="paymentMethod" value="paypal">
                                <label class="form-check-label">
                                    <i class="bi bi-paypal me-2"></i>PayPal
                                </label>
                            </div>
                        </div>
                        <!-- Contenedor PayPal -->
                        <div id="paypal-button-container" style="display: none; margin-top: 15px;"></div>
                        <!-- Formulario tarjeta (solo demostrativo) -->
                    </div>

                    <!-- Resumen de compra -->
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h6>Resumen de Compra</h6>
                                <div class="d-flex justify-content-between">
                                    <span>HidroEye</span>
                                    <span id="productPrice">$0.00</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span>Envío</span>
                                    <span class="text-success">Gratis</span>
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between fw-bold">
                                    <span>Total</span>
                                    <span id="totalModal">$0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>

            </div>
        </div>
    </div>
</div>

<!-- SDK de PayPal -->
<script src="https://www.paypal.com/sdk/js?client-id=AYNnPaks3a56FipdJmfgbT6kSDZaw-KgJtsMmI6vfRRw0uxW8Bf7RXeJSHEZlxg6-1JV63jh33BN7Tjz&currency=MXN"></script>

<script>
    const PRICES = {
        base: 4299,
        maintenance: 2500,
        app: 1000,
        warranty: 3000,
        membership: {
            basica: 0,
            profesional: 1000,
            empresarial: 5000
        }
    };

    let selectedMembership = 'basica';

    function formatMXN(value) {
        return value.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' });
    }

    function updateQuantity(change) {
        const input = document.getElementById('quantity');
        let quantity = parseInt(input.value);
        quantity = Math.min(Math.max(quantity + change, 1), 12);
        input.value = quantity;
        calculateTotal();
    }

    function calculateTotal() {
        // Calcular subtotal base
        let subtotal = PRICES.base * parseInt(document.getElementById('quantity').value);

        // Extras
        if (document.getElementById('maintenanceService').checked) subtotal += PRICES.maintenance;
        if (document.getElementById('mobileApp').checked) subtotal += PRICES.app;
        if (document.getElementById('extendedWarranty').checked) subtotal += PRICES.warranty;

        // Membresía seleccionada
        subtotal += PRICES.membership[selectedMembership];

        const iva = subtotal * 0.16;
        const total = subtotal + iva;

        // Actualizar en tarjeta principal
        document.getElementById('subtotal').innerText = formatMXN(subtotal);
        document.getElementById('iva').innerText = formatMXN(iva);
        document.getElementById('total').innerText = formatMXN(total);

        // Actualizar en modal
        const productPrice = document.getElementById('productPrice');
        const totalModal = document.getElementById('totalModal');
        if (productPrice && totalModal) {
            productPrice.innerText = formatMXN(subtotal);
            totalModal.innerText = formatMXN(total);
        }
    }

    function syncModalTotals() {
        calculateTotal(); // asegura que esté actualizado antes de abrir el modal
    }

    function addToCart() {
        const product = {
            id: 1,
            nombre: "Sistema de Monitoreo Inteligente",
            precio: 4299,
            cantidad: 1
        };

        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const existingProduct = cart.find(item => item.id === product.id);

        if (existingProduct) {
            existingProduct.cantidad += 1;
        } else {
            cart.push(product);
        }

        localStorage.setItem('cart', JSON.stringify(cart));
        alert(` ${product.nombre} se agregó al carrito.`);
    }
    
    function selectMembership(type) {
        selectedMembership = type;

        // Quitar borde activo de todas
        document.querySelectorAll('.membership-card').forEach(card => 
            card.classList.remove('border', 'border-primary')
        );

        // Marcar la seleccionada
        const card = document.getElementById(`membresia-${type}`);
        if (card) card.classList.add('border', 'border-primary');

        console.log(`Membresía seleccionada: ${type.toUpperCase()} ($${PRICES.membership[type]})`);

        // Recalcular total
        calculateTotal();
    }

    function processPayment() {
        const method = document.querySelector('input[name="paymentMethod"]:checked');
        if (!method) {
            alert('Por favor selecciona un método de pago.');
            return;
        }
        alert(`Procesando pago con ${method.value.toUpperCase()} para la membresía ${selectedMembership.toUpperCase()}`);
    }

    // Escuchar cambios en método de pago
    document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            const paypalBtn = document.getElementById('paypal-button-container');
            const cardForm = document.getElementById('cardForm');
            if (e.target.value === 'paypal') {
                paypalBtn.style.display = 'block';
                cardForm.style.display = 'none';
            } else {
                paypalBtn.style.display = 'none';
                cardForm.style.display = 'block';
            }
        });
    });

    // Configuración PayPal
    paypal.Buttons({
        createOrder: function (data, actions) {
            const totalText = document.getElementById('totalModal').innerText;
            const total = parseFloat(totalText.replace(/[^0-9.]/g, ''));
            return actions.order.create({
                purchase_units: [{
                    amount: { value: total.toFixed(2), currency_code: 'MXN' },
                    description: 'Compra de HidroEye'
                }]
            });
        },
        onApprove: function (data, actions) {
            return actions.order.capture().then(function (details) {
                alert(' Pago completado por ' + details.payer.name.given_name);
            });
        },
        onError: function (err) {
            console.error(err);
            alert('Error al procesar el pago con PayPal.');
        }
    }).render('#paypal-button-container');

    calculateTotal();
</script>
                        <!-- Technical Specs -->
                        <div class="accordion" id="productAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#specs">
                                        <i class="bi bi-list-check me-2"></i> Especificaciones Técnicas
                                    </button>
                                </h2>
                                <div id="specs" class="accordion-collapse collapse show" data-bs-parent="#productAccordion">
                                    <div class="accordion-body">
                                        <ul class="list-unstyled">
                                            <li><strong>Sensores:</strong> pH, Temperatura, Conductividad, Oxígeno Disuelto</li>
                                            <li><strong>Rango de pH:</strong> 0-14</li>
                                            <li><strong>Rango de Temperatura:</strong> -10°C a 60°C</li>
                                            <li><strong>Conectividad:</strong> WiFi, Bluetooth, 4G</li>
                                            <li><strong>Alimentación:</strong> Solar + Batería de respaldo</li>
                                            <li><strong>Resistencia:</strong> IP68 (sumergible)</li>
                                            <li><strong>Garantía:</strong> 1 año (extendible a 3 años)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#includes">
                                        <i class="bi bi-box-seam me-2"></i> ¿Qué Incluye?
                                    </button>
                                </h2>
                                <div id="includes" class="accordion-collapse collapse" data-bs-parent="#productAccordion">
                                    <div class="accordion-body">
                                        <ul>
                                            <li>1 Unidad de monitoreo AquaMonitor Pro</li>
                                            <li>4 Sensores calibrados</li>
                                            <li>Panel solar de 20W</li>
                                            <li>Batería de respaldo</li>
                                            <li>Kit de instalación completo</li>
                                            <li>Manual de usuario en español</li>
                                            <li>Acceso a plataforma web</li>
                                            <li>Soporte técnico por 1 año</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<!-- Reviews Section -->
    <section id="resenas" class="py-5 bg-light">
        <div class="container">
            <h3 class="fw-bold mb-4">Reseñas de Clientes</h3>
            
            <!-- Review Stats -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm">
                        <div class="card-body text-center">
                            <h2 class="display-4 fw-bold text-primary mb-0">4.8</h2>
                            <div class="text-warning mb-2">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-half"></i>
                            </div>
                            <p class="text-muted mb-0">Basado en <span id="reviewCount">24</span> reseñas</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Review Form -->
            <div id="reviewFormContainer" class="mb-4" style="display: none;">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h5 class="fw-bold mb-3">Escribe tu Reseña</h5>
                        <p class="text-muted small mb-3">Comparte tu opinión sobre nuestro producto</p>
                        <form id="reviewForm">
                            <div class="mb-3">
                                <label class="form-label">Calificación:</label>
                                <div class="rating-input">
                                    <i class="bi bi-star rating-star" data-rating="1"></i>
                                    <i class="bi bi-star rating-star" data-rating="2"></i>
                                    <i class="bi bi-star rating-star" data-rating="3"></i>
                                    <i class="bi bi-star rating-star" data-rating="4"></i>
                                    <i class="bi bi-star rating-star" data-rating="5"></i>
                                </div>
                                <input type="hidden" id="ratingValue" value="0">
                            </div>
                            <div class="mb-3">
                                <label for="reviewName" class="form-label">Tu Nombre:</label>
                                <input type="text" class="form-control" id="reviewName" required>
                            </div>
                            <div class="mb-3">
                                <label for="reviewTitle" class="form-label">Título de la Reseña:</label>
                                <input type="text" class="form-control" id="reviewTitle" required>
                            </div>
                            <div class="mb-3">
                                <label for="reviewText" class="form-label">Tu Opinión:</label>
                                <textarea class="form-control" id="reviewText" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Publicar Reseña</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Reviews List -->
            <div id="reviewsList">
                <!-- Reviews will be loaded here from Firebase -->
                <div class="card border-0 shadow-sm mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <div>
                                <h6 class="fw-bold mb-1">Juan Pérez</h6>
                                <div class="text-warning mb-2">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                </div>
                            </div>
                            <small class="text-muted">Hace 2 días</small>
                        </div>
                        <h6 class="fw-bold">Excelente producto</h6>
                        <p class="text-muted mb-0">El sistema funciona perfectamente en mi invernadero. La instalación fue sencilla y el monitoreo en tiempo real me ha ayudado a optimizar el riego.</p>
                        <div class="mt-2">
                            <span class="badge bg-success">Compra Verificada</span>
                        </div>
                    </div>
                </div>

                <div class="card border-0 shadow-sm mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <div>
                                <h6 class="fw-bold mb-1">María González</h6>
                                <div class="text-warning mb-2">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star"></i>
                                </div>
                            </div>
                            <small class="text-muted">Hace 1 semana</small>
                        </div>
                        <h6 class="fw-bold">Muy útil para mi negocio</h6>
                        <p class="text-muted mb-0">Me ha permitido detectar problemas de calidad del agua antes de que afecten mis cultivos. El soporte técnico es muy atento.</p>
                        <div class="mt-2">
                            <span class="badge bg-success">Compra Verificada</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


 <!-- Location Section with Map -->
<section id="ubicacion" class="py-5">
  <div class="container">
    <div class="row mb-4">
      <div class="col">
        <h2 class="display-5 fw-bold text-center mb-3">Nuestra Ubicación</h2>
        <p class="lead text-center text-muted">Visítanos en el Valle de Mezquital, Hidalgo</p>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-8">
        <!-- Aquí irá Leaflet -->
        <div id="map" class="rounded shadow" style="height: 450px; width: 100%;"></div>
      </div>
      <div class="col-lg-4">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body">
            <h5 class="fw-bold mb-4">Información de Contacto</h5>
            <div class="mb-3">
              <i class="bi bi-geo-alt-fill text-primary me-2"></i>
              <strong>Dirección:</strong><br>
              <span class="ms-4">Av. Principal 123, Valle de Mezquital, Hidalgo, México</span>
            </div>
            <div class="mb-3">
              <i class="bi bi-telephone-fill text-primary me-2"></i>
              <strong>Teléfono:</strong><br>
              <span class="ms-4">+52 771 123 4567</span>
            </div>
            <div class="mb-3">
              <i class="bi bi-envelope-fill text-primary me-2"></i>
              <strong>Email:</strong><br>
              <span class="ms-4">hidroeye@outlook.com</span>
            </div>
            <div class="mb-3">
              <i class="bi bi-clock-fill text-primary me-2"></i>
              <strong>Horario:</strong><br>
              <span class="ms-4">Lun - Vie: 9:00 AM - 6:00 PM<br>Sáb: 9:00 AM - 2:00 PM</span>
            </div>
            <hr>
            <h6 class="fw-bold mb-3">Lugares de Referencia:</h6>
            <ul class="list-unstyled" id="nearbyPlaces">
              <li class="mb-2"><i class="bi bi-pin-map text-muted me-2"></i>A 500m del Mercado Municipal</li>
              <li class="mb-2"><i class="bi bi-pin-map text-muted me-2"></i>Frente a la Plaza Principal</li>
              <li class="mb-2"><i class="bi bi-pin-map text-muted me-2"></i>A 2 km de la Central de Autobuses</li>
            </ul>
            <button class="btn btn-primary w-100 mt-3" onclick="getDirections()">
              <i class="bi bi-compass"></i> Cómo Llegar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

    <!-- Contact Form Section -->
    <section id="contacto" class="py-5 bg-light">
        <div class="container">
            <div class="row mb-4">
                <div class="col text-center">
                    <h2 class="display-5 fw-bold mb-3">Contáctanos</h2>
                    <p class="lead text-muted">¿Tienes preguntas? Estamos aquí para ayudarte</p>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card border-0 shadow-sm">
                        <div class="card-body p-4">
                            <form id="contactForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="contactName" class="form-label">Nombre Completo *</label>
                                        <input type="text" class="form-control" id="contactName" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="contactEmail" class="form-label">Correo Electrónico *</label>
                                        <input type="email" class="form-control" id="contactEmail" required>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="contactPhone" class="form-label">Teléfono *</label>
                                        <input type="tel" class="form-control" id="contactPhone" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="contactSubject" class="form-label">Asunto *</label>
                                        <select class="form-select" id="contactSubject" required>
                                            <option value="">Selecciona un asunto</option>
                                            <option value="informacion">Información del Producto</option>
                                            <option value="cotizacion">Solicitar Cotización</option>
                                            <option value="soporte">Soporte Técnico</option>
                                            <option value="instalacion">Instalación</option>
                                            <option value="otro">Otro</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="contactCompany" class="form-label">Empresa/Invernadero</label>
                                    <input type="text" class="form-control" id="contactCompany">
                                </div>
                                <div class="mb-3">
                                    <label for="contactMessage" class="form-label">Mensaje *</label>
                                    <textarea class="form-control" id="contactMessage" rows="5" required></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="contactPreference" class="form-label">Preferencia de Contacto</label>
                                    <select class="form-select" id="contactPreference">
                                        <option value="email">Correo Electrónico</option>
                                        <option value="phone">Teléfono</option>
                                        <option value="whatsapp">WhatsApp</option>
                                    </select>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="contactPrivacy" required>
                                    <label class="form-check-label" for="contactPrivacy">
                                        Acepto la política de privacidad y el tratamiento de mis datos
                                    </label>
                                </div>
                                <button type="submit" class="btn btn-primary btn-lg w-100">
                                    <i class="bi bi-send"></i> Enviar Mensaje
                                </button>
                            </form>
                            <div id="contactSuccess" class="alert alert-success mt-3" style="display: none;">
                                <i class="bi bi-check-circle me-2"></i>
                                ¡Mensaje enviado exitosamente! Te contactaremos pronto.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5 class="fw-bold mb-3"><i class="bi bi-droplet-fill"></i> HidroEye</h5>
                    <p class="text-muted">Soluciones tecnológicas para el monitoreo de calidad de agua en invernaderos del Valle de Mezquital.</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h6 class="fw-bold mb-3">Enlaces Rápidos</h6>
                    <ul class="list-unstyled">
                        <li><a href="#producto" class="text-muted text-decoration-none">Producto</a></li>
                        <li><a href="#ubicacion" class="text-muted text-decoration-none">Ubicación</a></li>
                        <li><a href="#contacto" class="text-muted text-decoration-none">Contacto</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Términos y Condiciones</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-3">
                    <h6 class="fw-bold mb-3">Síguenos</h6>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-white fs-4"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="text-white fs-4"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="text-white fs-4"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="text-white fs-4"><i class="bi bi-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <hr class="border-secondary">
            <div class="text-center text-muted">
                <p class="mb-0">&copy; 2025 HidroEye. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">Iniciar Sesión</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Correo Electrónico</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Contraseña</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">
                                Recordarme
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Iniciar Sesión</button>
                    </form>
                    <div class="text-center mt-3">
                        <a href="#" class="text-decoration-none">¿Olvidaste tu contraseña?</a>
                    </div>
                    <hr>
                    <div class="text-center">
                        <p class="mb-0">¿No tienes cuenta? <a href="#" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerModal">Regístrate aquí</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">Crear Cuenta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="registerForm">
                        <!-- Step 1: Basic Info -->
                        <div id="registerStep1">
                            <h6 class="fw-bold mb-3">Información Personal</h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="regName" class="form-label">Nombre Completo *</label>
                                    <input type="text" class="form-control" id="regName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="regEmail" class="form-label">Correo Electrónico *</label>
                                    <input type="email" class="form-control" id="regEmail" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="regPhone" class="form-label">Teléfono *</label>
                                    <input type="tel" class="form-control" id="regPhone" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="regPassword" class="form-label">Contraseña *</label>
                                    <input type="password" class="form-control" id="regPassword" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="regConfirmPassword" class="form-label">Confirmar Contraseña *</label>
                                <input type="password" class="form-control" id="regConfirmPassword" required>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="goToStep2()">Siguiente</button>
                        </div>

                        <!-- Step 2: Business Info & Membership -->
                        <div id="registerStep2" style="display: none;">
                            <h6 class="fw-bold mb-3">Información del Negocio</h6>
                            <div class="mb-3">
                                <label for="regCompany" class="form-label">Nombre del Invernadero/Empresa</label>
                                <input type="text" class="form-control" id="regCompany">
                            </div>
                            <div class="mb-3">
                                <label for="regAddress" class="form-label">Dirección</label>
                                <input type="text" class="form-control" id="regAddress">
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="regCity" class="form-label">Ciudad</label>
                                    <input type="text" class="form-control" id="regCity">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="regState" class="form-label">Estado</label>
                                    <input type="text" class="form-control" id="regState" value="Hidalgo">
                                </div>
                            </div>
                            
                            <input type="hidden" id="selectedMembership" value="basica">

                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="regTerms" required>
                                <label class="form-check-label" for="regTerms">
                                    Acepto los términos y condiciones y la política de privacidad
                                </label>
                            </div>

                            <div class="d-flex gap-2">
                                <button type="button" class="btn btn-secondary" onclick="goToStep1()">Atrás</button>
                                <button type="submit" class="btn btn-primary">Crear Cuenta</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Firebase -->
    <script type="module" src="/js/firebase-config.js"></script>
    <script type="module" src="/js/auth-firebase.js"></script>
    <script type="module" src="/js/reviews.js"></script>
    <script type="module" src="/js/cart-manager.js"></script>

    <!-- Tus otros scripts -->
    <script type="module" src="js/main.js"></script>
    <script src="/js/maps.js"></script>
    
    <!-- Load Google Maps -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&libraries=places"></script>
</body>
</html>
